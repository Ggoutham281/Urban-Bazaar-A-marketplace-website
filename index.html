<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Urban Bazaar</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Styling to ensure the embedded logo fits nicely in the header */
    .navbar .logo {
      display: flex;
      align-items: center;
      padding: 2px 0;
    }
    .navbar .logo img {
      height: 55px; /* Scaled to fit standard navbar height */
      width: auto;
      object-fit: contain;
      border-radius: 4px;
    }
    /* Simple fallback if image fails */
    .logo:empty::before {
      content: "Urban Bazaar";
      font-weight: bold;
      color: #002f34;
    }

    /* Added CSS for the delete button and image sizing */
    .product {
        position: relative;
        border: 1px solid #ddd;
        padding: 10px;
        border-radius: 8px;
        background: #fff;
    }
    .product img {
        width: 100%;
        height: 180px;
        object-fit: cover;
        border-radius: 4px;
    }
    .delete-btn {
        margin-top: 10px;
        width: 100%;
        padding: 8px;
        background-color: #ff4d4d;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
    }
    .delete-btn:hover {
        background-color: #cc0000;
    }
  </style>
</head>
<body>
<div class="navbar">
    <div class="logo">
        <img src="Gemini_Generated_Image_w80jljw80jljw80j.png" alt="Urban Bazaar" onerror="this.src='https://via.placeholder.com/150?text=Urban+Bazaar'">
    </div>         
    
    <select id="selectLocation" class="location-filter">
      <option value="all">All Locations</option>
      <option value="Karnataka">Karnataka</option>
      <option value="Delhi">Delhi</option>
      <option value="Hyderabad">Hyderabad</option>
      <option value="Andhra Pradesh">Andhra Pradesh</option>
      <option value="Bhubaneshwar">Bhubaneshwar</option>
      <option value="Nashik">Nashik</option>
      <option value="Chandigarh">Chandigarh</option>
    </select>

    <div class="search-container">
      <input type="text" placeholder="Find Cars, Mobile Phones and more...">
      <button class="search-btn">üîç</button>
    </div>
    
    <div class="lang">
      <select>
        <option>ENGLISH</option>
        <option>‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
        <option>‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
        <option>‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
      </select>
    </div>

    <div class="actions">
      <span class="icon">‚ù§Ô∏è</span>
      <span class="icon">üí¨</span>
      <span class="icon">üîî</span>
      <div class="user-menu">
        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="User" class="user-icon">
        <select id="userOptions">
          <option selected disabled>Account</option>
          <option value="login">Login</option>
          <option value="signup">Signup</option>
          <option value="logout">Logout</option>
        </select>
      </div>
    </div>

    <button class="sell-btn">+ SELL</button>
</div>

<div class="categories">
    <a href="#">All</a>
    <a href="#">Cars</a>
    <a href="#">Motorcycles</a>
    <a href="#">Smart Phones</a>
    <a href="#">Houses</a>
    <a href="#">scooters</a>
    <a href="#">Commercial Vehicles</a>
    <a href="#">Sofa</a>
    <a href="#">fridge</a>
    <a href="#">Wash Machine</a>
    <a href="#">Smart Tv</a>
    <a href="#">watch</a>
    <a href="#">camera</a>
    <a href="#">headset</a>
    <a href="#">microwave</a>
    <a href="#">ac</a>
    <a href="#">laptop</a>
    <a href="#">cycle</a>
</div>

<div class="banner">
    San Francisco from ‚Çπ96,834
    <br>
    <button>Let's Fly</button>
</div>

<div class="sort-container">
    <label for="sort">Sort by:</label>
    <select id="sort">
      <option value="priceLow">Price: Low to High</option>
      <option value="priceHigh">Price: High to Low</option>
    </select>
</div>

<div id="sellModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:1000;">
  <div style="background:#fff; padding:20px; border-radius:10px; width:400px; position:relative;">
    <span id="closeSellModal" style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:25px;">&times;</span>
    <h2>Sell Your Item</h2>
    <form id="sellForm">
      <input type="text" id="itemName" placeholder="Item Name" required style="width:100%; margin:5px 0; padding:8px;">
      <input type="text" id="itemcategory" placeholder="Category" required style="width:100%; margin:5px 0; padding:8px;">
      <input type="text" id="itemPrice" placeholder="Price (‚Çπ)" required style="width:100%; margin:5px 0; padding:8px;">
      <textarea id="itemDetails" placeholder="Details" required style="width:100%; margin:5px 0; padding:8px;"></textarea>
      <input type="url" id="itemImage" placeholder="Image URL" required style="width:100%; margin:5px 0; padding:8px;">
      <input type="text" id="itemLocation" placeholder="Location" required style="width:100%; margin:5px 0; padding:8px;">
      <button type="submit" style="padding:8px 15px; background:#007bff; color:#fff; border:none; border-radius:5px; cursor:pointer;">Add Item</button>
    </form>
  </div>
</div>

<div class="products">
  <h2>Fresh recommendations</h2>
  <div class="product-grid"></div> 
</div> 

<footer class="footer">
  <div class="footer-top">
    <div class="footer-section">
      <h4>POPULAR LOCATIONS</h4>
      <p><a href="#" class="location-link" data-location="Kolkata">Kolkata</a></p>
      <p><a href="#" class="location-link" data-location="Mumbai">Mumbai</a></p>
      <p><a href="#" class="location-link" data-location="Chennai">Chennai</a></p>
      <p><a href="#" class="location-link" data-location="Pune">Pune</a></p>
    </div>
    <div class="footer-section">
      <h4>TRENDING LOCATIONS</h4>
      <p><a href="#" class="location-link" data-location="Bhubaneshwar">Bhubaneshwar</a></p>
      <p><a href="#" class="location-link" data-location="Hyderabad">Hyderabad</a></p>
      <p><a href="#" class="location-link" data-location="Chandigarh">Chandigarh</a></p>
      <p><a href="#" class="location-link" data-location="Nashik">Nashik</a></p>
    </div>
    <div class="footer-section">
      <h4>ABOUT US</h4>
      <p><a href="#" class="nav-link" data-action="Tech@UrbanBazaar">Tech@UrbanBazaar</a></p>
      <p><a href="#" class="nav-link" data-action="Careers">Careers</a></p>
    </div>
    <div class="footer-section">
      <h4>URBAN BAZAAR</h4>
      <p><a href="#" class="nav-link" data-action="Blog">Blog</a></p>
      <p><a href="#" class="nav-link" data-action="Help">Help</a></p>
      <p><a href="#" class="nav-link" data-action="Sitemap">Sitemap</a></p>
    </div>
    <div class="footer-section follow">
      <h4>FOLLOW US</h4>
      <div class="social-icons">
        <a href="#" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook"></a>
        <a href="#" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/1384/1384063.png" alt="Instagram"></a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>All rights reserved ¬© 2006‚Äì2025 Urban Bazaar</p>
  </div>
</footer>

<div id="authModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:1100;">
  <div style="background:#fff; padding:30px; border-radius:10px; width:350px; position:relative; text-align:center;">
    <span id="closeAuthModal" style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:25px;">&times;</span>
    <h2 id="authTitle">Login to Urban Bazaar</h2>
    <form id="emailAuthForm">
      <input type="email" id="emailInput" placeholder="Email Address" required style="width:90%; margin:5px 0; padding:10px;">
      <input type="password" id="passwordInput" placeholder="Password" required style="width:90%; margin:5px 0; padding:10px;">
      <button type="submit" id="authButton" style="width:90%; padding:10px; background:#007bff; color:#fff; border:none; border-radius:5px; cursor:pointer;">Login</button>
    </form>
  </div>
</div>

<script>
    let allProducts = [];
    let currentSearchTerm = '';
    let productIdCounter = Date.now(); 

    const sellBtn = document.querySelector('.sell-btn');
    const sellModal = document.getElementById('sellModal');
    const closeSellModal = document.getElementById('closeSellModal');
    const sellForm = document.getElementById('sellForm');
    const productGrid = document.querySelector('.product-grid');
    const selectLocation = document.getElementById('selectLocation');
    const searchInput = document.querySelector('.search-container input');
    const sortSelect = document.getElementById('sort');

    const initialProducts = [
        { id: 1, name: "Dell Inspiron 15", category: "laptop", price: 45000, details: "Core i5, 8GB RAM", image: "https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=500", location: "Hyderabad" },
        { id: 2, name: "Maruti Swift", category: "car", price: 450000, details: "VDI 2018 Excellent Condition", image: "https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=500", location: "Delhi" }
    ];

    function loadProducts() {
        const savedProducts = JSON.parse(localStorage.getItem('products')) || [];
        allProducts = [...initialProducts, ...savedProducts];
        filterAndSortProducts(); 
    }

    function addProductToGrid(product) {
        const newProduct = document.createElement('div');
        newProduct.classList.add('product');
        newProduct.innerHTML = `
            <img src="${product.image}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/300?text=No+Image+Found'">
            <div class="info">
                <div class="price">‚Çπ ${product.price.toLocaleString('en-IN')}</div>
                <div class="details"><strong>${product.name}</strong><br>${product.details}</div>
                <button class="delete-btn" onclick="deleteProduct(${product.id})">Delete Item</button>
            </div>`;
        productGrid.appendChild(newProduct);
    }

    function deleteProduct(id) {
        if(confirm("Are you sure you want to delete this item?")) {
            allProducts = allProducts.filter(p => p.id !== id);
            let saved = JSON.parse(localStorage.getItem('products')) || [];
            saved = saved.filter(p => p.id !== id);
            localStorage.setItem('products', JSON.stringify(saved));
            filterAndSortProducts();
        }
    }

    function filterAndSortProducts() {
        const selectedLoc = selectLocation.value.toLowerCase();
        
        // Updated searchMatch to include Price
        let filtered = allProducts.filter(p => {
            const locMatch = selectedLoc === 'all' || p.location.toLowerCase() === selectedLoc;
            const searchMatch = !currentSearchTerm || 
                                (p.name + p.details).toLowerCase().includes(currentSearchTerm) ||
                                p.price.toString().includes(currentSearchTerm);
            return locMatch && searchMatch;
        });

        // Sorting Logic
        if (sortSelect.value === 'priceLow') {
            filtered.sort((a, b) => a.price - b.price);
        } else {
            filtered.sort((a, b) => b.price - a.price);
        }

        productGrid.innerHTML = '';
        filtered.forEach(addProductToGrid);
    }

    sellBtn.addEventListener('click', () => sellModal.style.display = 'flex');
    closeSellModal.addEventListener('click', () => sellModal.style.display = 'none');
    
    sellForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const product = {
            id: productIdCounter++,
            name: document.getElementById('itemName').value,
            category: document.getElementById('itemcategory').value.toLowerCase(),
            price: parseFloat(document.getElementById('itemPrice').value),
            details: document.getElementById('itemDetails').value,
            image: document.getElementById('itemImage').value,
            location: document.getElementById('itemLocation').value
        };
        allProducts.push(product);
        let saved = JSON.parse(localStorage.getItem('products')) || [];
        saved.push(product);
        localStorage.setItem('products', JSON.stringify(saved));
        filterAndSortProducts();
        sellModal.style.display = 'none';
        sellForm.reset();
    });

    selectLocation.addEventListener('change', filterAndSortProducts);
    sortSelect.addEventListener('change', filterAndSortProducts);
    searchInput.addEventListener('input', (e) => {
        currentSearchTerm = e.target.value.toLowerCase();
        filterAndSortProducts();
    });

    document.addEventListener('DOMContentLoaded', loadProducts);
</script>